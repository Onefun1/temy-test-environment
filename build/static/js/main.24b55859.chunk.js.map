{"version":3,"sources":["dataFromServer.js","UserBase.js","App.js","index.js"],"names":["BASE_URL","UserBase","props","users","state","react_default","a","createElement","className","map","user","key","concat","name","email","phone_number","date","App","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleChange","_this$state","cities","states","selectCountriesRef","current","value","selectStatesRef","parentElement","hidden","filteredStatesById","toConsumableArray","filter","country_id","setState","selectCitiesRef","filteredCitiesById","city","state_id","userAdress","inputAdressRef","aboutUser","inputAboutRef","newUser","inputNameRef","inputEmailRef","inputPhoneRef","address","about_me","city_id","handleSubmit","event","fetch","method","headers","Accept","Content-Type","body","JSON","stringify","then","res","json","data","console","log","catch","err","today","Date","getFullYear","getMonth","getDate","isLoading","countries","React","createRef","response","_this2","_this$state2","onChange","onSubmit","type","required","placeholder","pattern","autoComplete","ref","length","country","id","hasc","maxLength","rows","style","resize","UserBase_UserBase","color","textAlign","Component","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"4RAAMA,SAAW,0BCEJC,EAAW,SAAAC,GAAS,IACvBC,EAAUD,EAAME,MAAhBD,MAER,OACEE,EAAAC,EAAAC,cAAA,OAAKC,UAAU,iBACZL,EAAMM,IAAI,SAAAC,GACT,OACEL,EAAAC,EAAAC,cAAA,OACEC,UAAU,wBACVG,IAAG,GAAAC,OAAKF,EAAKG,MAAVD,OAAiBF,EAAKI,QAEzBT,EAAAC,EAAAC,cAAA,kBACQF,EAAAC,EAAAC,cAAA,gBAAQG,EAAKG,OAErBR,EAAAC,EAAAC,cAAA,mBACSF,EAAAC,EAAAC,cAAA,YAAOG,EAAKI,OAAc,KAEnCT,EAAAC,EAAAC,cAAA,0BACgBF,EAAAC,EAAAC,cAAA,YAAOG,EAAKK,cAAqB,KAEjDV,EAAAC,EAAAC,cAAA,qBACY,KAOZF,EAAAC,EAAAC,cAAA,2BACiBF,EAAAC,EAAAC,cAAA,YAAOG,EAAKM,YCwO1BC,cAjQb,SAAAA,IAAc,IAAAC,EAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,IACZC,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,KAAAH,QA0CFI,aAAe,WAAM,IAAAC,EACcR,EAAKd,MAA9BuB,EADWD,EACXC,OAAQC,EADGF,EACHE,OAAQZ,EADLU,EACKV,KAExB,GAAIE,EAAKW,mBAAmBC,QAAQC,MAAO,CACzCb,EAAKc,gBAAgBF,QAAQG,cAAcC,QAAS,EACpD,IAAMC,EAAqBhB,OAAAiB,EAAA,EAAAjB,CAAIS,GAAQS,OAAO,SAAAjC,GAC5C,OAAOA,EAAMkC,aAAepB,EAAKW,mBAAmBC,QAAQC,QAE9Db,EAAKqB,SAAS,CACZX,OAAQO,SAGVjB,EAAKc,gBAAgBF,QAAQG,cAAcC,QAAS,EACpDhB,EAAKc,gBAAgBF,QAAQC,MAAQ,KAEvC,GAAIb,EAAKc,gBAAgBF,QAAQC,MAAO,CACtCb,EAAKsB,gBAAgBV,QAAQG,cAAcC,QAAS,EAEpD,IAAMO,EAAqBtB,OAAAiB,EAAA,EAAAjB,CAAIQ,GAAQU,OAAO,SAAAK,GAC5C,OAAOA,EAAKC,WAAazB,EAAKc,gBAAgBF,QAAQC,QAExDb,EAAKqB,SAAS,CACZZ,OAAQc,SAGVvB,EAAKsB,gBAAgBV,QAAQG,cAAcC,QAAS,EACpDhB,EAAKsB,gBAAgBV,QAAQC,MAAQ,KAEvC,IAAMa,EACkC,KAAtC1B,EAAK2B,eAAef,QAAQC,MACxB,KACAb,EAAK2B,eAAef,QAAQC,MAC5Be,EACiC,KAArC5B,EAAK6B,cAAcjB,QAAQC,MACvB,KACAb,EAAK6B,cAAcjB,QAAQC,MAE7BiB,EAAU,CACZnC,KAAMK,EAAK+B,aAAanB,QAAQC,MAChCjB,MAAOI,EAAKgC,cAAcpB,QAAQC,MAClChB,aAAcG,EAAKiC,cAAcrB,QAAQC,MACzCqB,QAASR,EACTS,SAAUP,EACVR,WAAYpB,EAAKW,mBAAmBC,QAAQC,MAC5CY,SAAUzB,EAAKc,gBAAgBF,QAAQC,MACvCuB,QAASpC,EAAKsB,gBAAgBV,QAAQC,MACtCf,KAAMA,GAGRE,EAAKqB,SAAS,CACZS,aA7FU9B,EAiGdqC,aAAe,SAAAC,GAIb,OAAOC,MAAM,8BAA+B,CAC1CC,OAAQ,OACRC,QAAS,CACPC,OAAQ,mBACRC,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU9C,EAAKd,MAAM4C,WAE/BiB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAG,GAAI,OAAIC,QAAQC,IAAIF,KACzBH,KAAK,SAAAvD,GACJQ,EAAKqB,SAAS,CACZpC,MAAK,GAAAS,OAAAO,OAAAiB,EAAA,EAAAjB,CAAMD,EAAKd,MAAMD,OAAjB,CAAwBO,QAGhC6D,MAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAI,aAAcE,MAlH1C,IAAIC,EAAQ,IAAIC,KACZ1D,EACFyD,EAAME,cACN,KACCF,EAAMG,WAAa,GACpB,IACAH,EAAMI,UARI,OASZ3D,EAAKd,MAAQ,CACX0E,WAAW,EACXnD,OAAQ,GACRoD,UAAW,GACX5E,MAAO,GACPyB,OAAQ,GACRZ,KAAMA,GAGRE,EAAKW,mBAAqBmD,IAAMC,YAChC/D,EAAKc,gBAAkBgD,IAAMC,YAC7B/D,EAAKsB,gBAAkBwC,IAAMC,YAC7B/D,EAAK+B,aAAe+B,IAAMC,YAC1B/D,EAAKgC,cAAgB8B,IAAMC,YAC3B/D,EAAK2B,eAAiBmC,IAAMC,YAC5B/D,EAAK6B,cAAgBiC,IAAMC,YAC3B/D,EAAKiC,cAAgB6B,IAAMC,YAzBf/D,uNFHPuC,MAAK,GAAA7C,OAAIZ,EAAJ,WACTiE,KAAK,SAAAiB,GAAQ,OAAIA,EAASf,SAC1BF,KAAK,SAAAG,GAAI,OAAIA,kBE8BRzC,kBF3BD8B,MAAK,GAAA7C,OAAIZ,EAAJ,cACTiE,KAAK,SAAAiB,GAAQ,OAAIA,EAASf,SAC1BF,KAAK,SAAAG,GAAI,OAAIA,kBE0BRW,kBFlBDtB,MAAK,GAAA7C,OAAIZ,EAAJ,UACTiE,KAAK,SAAAiB,GAAQ,OAAIA,EAASf,SAC1BF,KAAK,SAAAG,GAAI,OAAIA,kBEiBRjE,mBFxBDsD,MAAK,GAAA7C,OAAIZ,EAAJ,WACTiE,KAAK,SAAAiB,GAAQ,OAAIA,EAASf,SAC1BF,KAAK,SAAAG,GAAI,OAAIA,YEuBRxC,SAENP,KAAKkB,SAAS,CACZuC,WAAW,EACXnD,SACAoD,YACA5E,QACAyB,+IAgFK,IAAAuD,EAAA9D,KAAA+D,EAC0C/D,KAAKjB,MAA9C2E,EADDK,EACCL,UAAWpD,EADZyD,EACYzD,OAAQC,EADpBwD,EACoBxD,OAAQkD,EAD5BM,EAC4BN,UACnC,OACEzE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,OACbH,EAAAC,EAAAC,cAAA,0BACAF,EAAAC,EAAAC,cAAA,QAGE8E,SAAU,kBAAMF,EAAK1D,gBACrB6D,SAAUjE,KAAKkC,cAEflD,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,SACEgF,KAAK,OACL1E,KAAK,OACL2E,UAAQ,EACRC,YAAY,kDACZC,QAAQ,4CACRC,aAAa,MACbC,IAAKvE,KAAK4B,eAEZ5C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAChBH,EAAAC,EAAAC,cAAA,+BAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,SACEgF,KAAK,QACL1E,KAAK,QACL2E,UAAQ,EACRC,YAAY,mBACZE,aAAa,MACbC,IAAKvE,KAAK6B,gBAEZ7C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAChBH,EAAAC,EAAAC,cAAA,gCAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,UAAQM,KAAK,aAAa2E,UAAQ,EAACI,IAAKvE,KAAKQ,oBAC3CxB,EAAAC,EAAAC,cAAA,eACCuE,GAAaC,EAAUc,OAAS,EAC7Bd,EAAUtE,IAAI,SAAAqF,GACZ,OACEzF,EAAAC,EAAAC,cAAA,UAAQI,IAAKmF,EAAQC,GAAIhE,MAAO+D,EAAQC,IACrCD,EAAQjF,QAIf,MAENR,EAAAC,EAAAC,cAAA,kCAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQ0B,QAAM,GAC3B7B,EAAAC,EAAAC,cAAA,UAAQM,KAAK,WAAW2E,UAAQ,EAACI,IAAKvE,KAAKW,iBACzC3B,EAAAC,EAAAC,cAAA,eACCuE,GAAalD,EAAOiE,OAAS,EAC1BjE,EAAOnB,IAAI,SAAAL,GACT,OACEC,EAAAC,EAAAC,cAAA,UACEI,IAAG,GAAAC,OAAKR,EAAM2F,IAAXnF,OAAgBR,EAAM4F,MACzBjE,MAAO3B,EAAM2F,IAEZ3F,EAAMS,QAIb,MAENR,EAAAC,EAAAC,cAAA,gCAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,QAAQ0B,QAAM,GAC3B7B,EAAAC,EAAAC,cAAA,UAAQM,KAAK,UAAU2E,UAAQ,EAACI,IAAKvE,KAAKmB,iBACxCnC,EAAAC,EAAAC,cAAA,eACCuE,GAAanD,EAAOkE,OAAS,EAC1BlE,EAAOlB,IAAI,SAAAiC,GACT,OACErC,EAAAC,EAAAC,cAAA,UAAQI,IAAG,GAAAC,OAAK8B,EAAKqD,IAAVnF,OAAe8B,EAAKsD,MAAQjE,MAAOW,EAAKqD,IAChDrD,EAAK7B,QAIZ,MAENR,EAAAC,EAAAC,cAAA,+BAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,SACEgF,KAAK,MACL1E,KAAK,QACL2E,UAAQ,EACRC,YAAY,uCACZC,QAAQ,YACRO,UAAU,KACVN,aAAa,MACbC,IAAKvE,KAAK8B,gBAEZ9C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAChBH,EAAAC,EAAAC,cAAA,gCAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,SACEgF,KAAK,OACLE,YAAY,qBACZE,aAAa,MACbC,IAAKvE,KAAKwB,iBAEZxC,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAChBH,EAAAC,EAAAC,cAAA,gCAEFF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SACbH,EAAAC,EAAAC,cAAA,YACEM,KAAK,WACLqF,KAAK,IACLD,UAAU,MACVE,MAAO,CAAEC,OAAQ,QACjBR,IAAKvE,KAAK0B,gBAEZ1C,EAAAC,EAAAC,cAAA,QAAMC,UAAU,QAChBH,EAAAC,EAAAC,cAAA,iCAEFF,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SAAS+E,KAAK,SAASxD,MAAM,aAGjD+C,EACCzE,EAAAC,EAAAC,cAAC8F,EAAD,CAAUjG,MAAOiB,KAAKjB,QAEtBC,EAAAC,EAAAC,cAAA,MAAI4F,MAAO,CAAEG,MAAO,MAAOC,UAAW,WAAtC,qEAEElG,EAAAC,EAAAC,cAAA,QAAM4F,MAAO,CAAEG,MAAO,UAAtB,4CAxPMtB,IAAMwB,WCAxBC,IAASC,OAAOrG,EAAAC,EAAAC,cAACoG,EAAD,MAASC,SAASC,eAAe","file":"static/js/main.24b55859.chunk.js","sourcesContent":["const BASE_URL = \"http://localhost:8000/\";\n\nexport const getCities = () => {\n  return fetch(`${BASE_URL}cities`)\n    .then(response => response.json())\n    .then(data => data);\n};\nexport const getCountries = () => {\n  return fetch(`${BASE_URL}countries`)\n    .then(response => response.json())\n    .then(data => data);\n};\nexport const getStates = () => {\n  return fetch(`${BASE_URL}states`)\n    .then(response => response.json())\n    .then(data => data);\n};\nexport const getUsers = () => {\n  return fetch(`${BASE_URL}users`)\n    .then(response => response.json())\n    .then(data => data);\n};\n\n// const fetchData = path => {\n//   const BASE_URL = \"http://localhost:3000/\";\n\n//   const base = Promise.all([\n//     fetch(`${BASE_URL}cities`),\n//     fetch(`${BASE_URL}countries`),\n//     fetch(`${BASE_URL}states`),\n//     fetch(`${BASE_URL}users`)\n//   ])\n//     .then(allResponses => {\n//       let cities = allResponses[0].json();\n//       let countries = allResponses[1].json();\n//       let states = allResponses[2].json();\n//       let users = allResponses[3].json();\n//       console.log(cities, countries, states, users);\n//     })\n//     .catch(error => console.log(\"parsing failed\", error));\n//   console.log(base);\n// };\n","import React from \"react\";\n\nexport const UserBase = props => {\n  const { users } = props.state;\n\n  return (\n    <div className=\"app container\">\n      {users.map(user => {\n        return (\n          <div\n            className=\"container__user-block\"\n            key={`${user.name}${user.email}`}\n          >\n            <p>\n              Name: <span> {user.name}</span>\n            </p>\n            <p>\n              Email: <span>{user.email}</span>{\" \"}\n            </p>\n            <p>\n              Phone number: <span>{user.phone_number}</span>{\" \"}\n            </p>\n            <p>\n              Location:{\" \"}\n              {/* <span>\n                {countries[user.country_id - 1].name},{\" \"}\n                {states[user.state_id - 1].name},{\" \"}\n                {cities[user.city_id - 1].name}\n              </span>{\" \"} */}\n            </p>\n            <p>\n              Creation date: <span>{user.date}</span>\n            </p>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","import React from \"react\";\nimport \"./App.css\";\nimport { getCities, getCountries, getUsers, getStates } from \"./dataFromServer\";\nimport { UserBase } from \"./UserBase\";\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    let today = new Date();\n    let date =\n      today.getFullYear() +\n      \"-\" +\n      (today.getMonth() + 1) +\n      \"-\" +\n      today.getDate();\n    this.state = {\n      isLoading: false,\n      cities: {},\n      countries: {},\n      users: {},\n      states: {},\n      date: date\n    };\n\n    this.selectCountriesRef = React.createRef();\n    this.selectStatesRef = React.createRef();\n    this.selectCitiesRef = React.createRef();\n    this.inputNameRef = React.createRef();\n    this.inputEmailRef = React.createRef();\n    this.inputAdressRef = React.createRef();\n    this.inputAboutRef = React.createRef();\n    this.inputPhoneRef = React.createRef();\n  }\n\n  async componentDidMount() {\n    const cities = await getCities();\n    const countries = await getCountries();\n    const users = await getUsers();\n    const states = await getStates();\n\n    this.setState({\n      isLoading: true,\n      cities,\n      countries,\n      users,\n      states\n    });\n  }\n\n  handleChange = () => {\n    const { cities, states, date } = this.state;\n\n    if (this.selectCountriesRef.current.value) {\n      this.selectStatesRef.current.parentElement.hidden = false;\n      const filteredStatesById = [...states].filter(state => {\n        return state.country_id === this.selectCountriesRef.current.value;\n      });\n      this.setState({\n        states: filteredStatesById\n      });\n    } else {\n      this.selectStatesRef.current.parentElement.hidden = true;\n      this.selectStatesRef.current.value = null;\n    }\n    if (this.selectStatesRef.current.value) {\n      this.selectCitiesRef.current.parentElement.hidden = false;\n\n      const filteredCitiesById = [...cities].filter(city => {\n        return city.state_id === this.selectStatesRef.current.value;\n      });\n      this.setState({\n        cities: filteredCitiesById\n      });\n    } else {\n      this.selectCitiesRef.current.parentElement.hidden = true;\n      this.selectCitiesRef.current.value = null;\n    }\n    const userAdress =\n      this.inputAdressRef.current.value === \"\"\n        ? null\n        : this.inputAdressRef.current.value;\n    const aboutUser =\n      this.inputAboutRef.current.value === \"\"\n        ? null\n        : this.inputAboutRef.current.value;\n\n    let newUser = {\n      name: this.inputNameRef.current.value,\n      email: this.inputEmailRef.current.value,\n      phone_number: this.inputPhoneRef.current.value,\n      address: userAdress,\n      about_me: aboutUser,\n      country_id: this.selectCountriesRef.current.value,\n      state_id: this.selectStatesRef.current.value,\n      city_id: this.selectCitiesRef.current.value,\n      date: date\n    };\n\n    this.setState({\n      newUser\n    });\n  };\n\n  handleSubmit = event => {\n    // event.preventDefault();\n    // alert(\"A list was submitted: \" + this.state.newUser);\n\n    return fetch(\"http://localhost:8000/users\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(this.state.newUser)\n    })\n      .then(res => res.json())\n      .then(data => console.log(data))\n      .then(user => {\n        this.setState({\n          users: [...this.state.users, user]\n        });\n      })\n      .catch(err => console.log(\"ERROR POST\", err));\n  };\n\n  render() {\n    const { countries, cities, states, isLoading } = this.state;\n    return (\n      <div>\n        <div className=\"app\">\n          <h3>Registration</h3>\n          <form\n            // action=\"http://localhost:3000/users\"\n            // method=\"post\"\n            onChange={() => this.handleChange()}\n            onSubmit={this.handleSubmit}\n          >\n            <div className=\"group\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                required\n                placeholder=\"Enter your firstName and lastName (Xxxxx Xxxxx)\"\n                pattern=\"[A-Z]{1}[a-z]{1,30}\\s[A-Z]{1}[a-z]{1,30}\"\n                autoComplete=\"off\"\n                ref={this.inputNameRef}\n              />\n              <span className=\"bar\" />\n              <label>&#8593; Name *</label>\n            </div>\n            <div className=\"group\">\n              <input\n                type=\"email\"\n                name=\"email\"\n                required\n                placeholder=\"Enter your email\"\n                autoComplete=\"off\"\n                ref={this.inputEmailRef}\n              />\n              <span className=\"bar\" />\n              <label>&#8593; Email *</label>\n            </div>\n            <div className=\"group\">\n              <select name=\"country_id\" required ref={this.selectCountriesRef}>\n                <option />\n                {isLoading && countries.length > 0\n                  ? countries.map(country => {\n                      return (\n                        <option key={country.id} value={country.id}>\n                          {country.name}\n                        </option>\n                      );\n                    })\n                  : null}\n              </select>\n              <label>&#8593; Country *</label>\n            </div>\n            <div className=\"group\" hidden>\n              <select name=\"state_id\" required ref={this.selectStatesRef}>\n                <option />\n                {isLoading && states.length > 0\n                  ? states.map(state => {\n                      return (\n                        <option\n                          key={`${state.id}${state.hasc}`}\n                          value={state.id}\n                        >\n                          {state.name}\n                        </option>\n                      );\n                    })\n                  : null}\n              </select>\n              <label>&#8593; State *</label>\n            </div>\n            <div className=\"group\" hidden>\n              <select name=\"city_id\" required ref={this.selectCitiesRef}>\n                <option />\n                {isLoading && cities.length > 0\n                  ? cities.map(city => {\n                      return (\n                        <option key={`${city.id}${city.hasc}`} value={city.id}>\n                          {city.name}\n                        </option>\n                      );\n                    })\n                  : null}\n              </select>\n              <label>&#8593; City *</label>\n            </div>\n            <div className=\"group\">\n              <input\n                type=\"tel\"\n                name=\"phone\"\n                required\n                placeholder=\"Enter your phone number 38xxxxxxxxxx\"\n                pattern=\"[0-9]{12}\"\n                maxLength=\"12\"\n                autoComplete=\"off\"\n                ref={this.inputPhoneRef}\n              />\n              <span className=\"bar\" />\n              <label>&#8593; Phone *</label>\n            </div>\n            <div className=\"group\">\n              <input\n                type=\"text\"\n                placeholder=\"Enter your address\"\n                autoComplete=\"off\"\n                ref={this.inputAdressRef}\n              />\n              <span className=\"bar\" />\n              <label>&#8593; Address</label>\n            </div>\n            <div className=\"group\">\n              <textarea\n                name=\"about_me\"\n                rows=\"1\"\n                maxLength=\"500\"\n                style={{ resize: \"none\" }}\n                ref={this.inputAboutRef}\n              />\n              <span className=\"bar\" />\n              <label>&#8593; About me</label>\n            </div>\n            <input className=\"button\" type=\"submit\" value=\"Submit\" />\n          </form>\n        </div>\n        {isLoading ? (\n          <UserBase state={this.state} />\n        ) : (\n          <h2 style={{ color: \"red\", textAlign: \"center\" }}>\n            For correct work, you must run the server in the project directory\n            <span style={{ color: \"green\" }}>\n              (./aside/mock-server/server.js)\n            </span>\n          </h2>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}